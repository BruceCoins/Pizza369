## 一、Crate 和 Package
- **Crate**：   
  - **binary crate**：可执行文件,src/main.rs   
  - **library crate**： 库文件, src/lib.rs      

- **Package (由多个 crates 组成)：Cargo.toml文件**
  - 可有多个 binary crates
  - 最多只能有一个 library crate
  - 至少有一个 crate

```rust
// 命令行
# cargo new project_name         //创建 binary 项目，包含 main.rs
# cargo new project_name --lib   //创建 binary 项目，包含 lib.rs
```
----------------
## 二、Model(模块)  
**声明模块**：``` mod garden  ```   
**引用模块**：``` use 关键字 ```  

### 1、创建项目(名为 package_name)  
- 初始化项目结构
```
project_name/
├── src/
│   ├── main.rs          # 二进制 binary crate 的入口文件
├── Cargo.toml
└── Cargo.lock          # 依赖版本锁文件（自动生成）
```  
- Cargo.toml文件   
```rust  
[package]
name = "package_name"    //package 名字
version = "0.1.0"        //版本
edition = "2021"         //rust版本信息

[dependencies]           //项目依赖
```  
### 2、model 引用方式  
#### ----------【1】内联模式：在引用model的文件内部直接定义----------  
```rust
//直接在文件中定义 model，扫描名字后边是否有{}
mod models{ .. }
```
#### ----------【2】**最常用！！！！** 单独创建models.rs文件，再将model列表放到lib.rs中-----------  
- 项目结构
```rust
project_name/
├── src/
│   ├── lib.rs           # 库 libary crate 的入口文件
│   ├── main.rs          # 二进制 binary crate 的入口文件
│   ├── models.rs        # model文件
├── Cargo.toml
└── Cargo.lock
```
- lib.rs 文件
```rust
mod models;     //"mod 名字" 与 models.rs 文件名 必须一致
```
- models.rs 文件
```rust 
mod models{ .. }
```

#### --------【3】地址查找 ----------    
<1> lib.rs 中添加要引用的 model 列表（如 **mod models**）  
<2> 在 lib.rs 同级别创建文件夹，名字与 **models** 同名 
<3> 在 model 文件夹内创建 **mod.rs** 文件，存放 model 信息    

- 项目结构  
```rust
project_name/
├── src/
│   └── models/          # 列表名与 lib.rs 中一致
│          └── mod.rs    # 必须是此命
│   ├── lib.rs           # 库 libary crate 的入口文件：mod models;
│   ├── main.rs          # 二进制 binary crate 的入口文件
├── Cargo.toml
└── Cargo.lock
```
- lib.rs 文件
```rust
mod models;     //"mod 名字" 与 models.rs 文件名 必须一致
```
### 3、models 模块的 子模块  
-------【1】 **无论是 model 还是 函数，默认都是私有的，提高访问权限，用 pub 修饰** --------   

<1> 在 models.rs 文件中添加 子模块 （如：mod enums;）  
<2> 创建 models.rs 同级别同名的 models 文件夹  
<3> 在 models 文件夹中创建 子模块文件，文件名与 models.rs中写入的子模块文件名一致  

- 项目结构
```rust
project_name/
├── src/
│   └── models/          # (2) 创建 父模块同名的 models 文件夹
│          └── enums.rs  # (3) 创建 子模块文件，名字一致
│   ├── lib.rs           # 库 libary crate 的入口文件：mod models;
│   ├── main.rs          # 二进制 binary crate 的入口文件
│   ├── models.rs        # (1) 写入子模块，'mod 子模块文件名' (如：mod enums;)
├── Cargo.toml
└── Cargo.lock
```
---------【2】子模块 调用(相对路径、绝对路径)---------
```rust
//main.rs 文件 
fn main(){
    //绝对路径调用： m1与main同等级，m2、method1()需要pub修饰才可访问
    crate::m1::m2::method1();
}

mod m1{                      //m1默认是私有的，但与main是同等级，可直接被调用
    pub mod m2{              //m2是m1子模块，默认私有
        pub fn method1(){    //method1()是m1的方法，默认私有
            println!("Method1");
        }
    }
}

mod x1{
    fn method3(){
        //相对路径调用 method2()
        //x2::method2() 或如下调用
        self::x2::method2();
    }
    
    mod x2{
      pub fn method2(){
            println("Method2");

            //相对路径调用 method1()
            super::super::m1::m2::method1();
        }
    }
}
```
---------【3】 main() 在 binary crate中，而 模块 在libary crate中 ----------
- 项目结构
```rust
project_name/
├── src/
│   └── models/          # (2) 创建 父模块同名的 models 文件夹
│          └── enums.rs  # (3) 创建 子模块文件，名字一致
│   ├── lib.rs           # 库 libary crate 的入口文件：mod models;
│   ├── main.rs          # 二进制 binary crate 的入口文件
│   ├── models.rs        # (1) 写入子模块，'mod 子模块文件名' (如：mod enums;)
├── Cargo.toml
└── Cargo.lock
```
- lib.rs 使用 pub 修饰
```rust
pub mod models;
```
- models.rs 使用 pub 修饰 
```rust
pub mod enums;
```
- enums.rs  
```rust
//枚举类型，pub修饰
pub enum YesNo{
    Yes,
    No
}
```
- Cargo.toml 配置文件
```rust
[package]
name = "package_name"    //package 名字
version = "0.1.0"        //版本
edition = "2021"         //rust版本信息

[dependencies]           //项目依赖
```
- main.rs 中不能直接调用 lib.rs 中定义的model，可以通过 Cargo.toml 中的 **package_name** 来实现
```rust
// let y = crate:: 不能调用数据，使用 package_name
let y = package_name::models::enums::YesNo::Yes;
```
-------【3.1】多种模块调用-------  

只需在 model.rs 中引入模块名，在 models 文件夹创建模块文件  
- 项目结构
```rust
project_name/
├── src/
│   └── models/          # (2) 创建 父模块同名的 models 文件夹
│          └── enums.rs  # (3) 创建 子模块文件，名字一致
│          └── struts.rs  # (3) 创建 子模块文件，名字一致
│   ├── lib.rs           # 库 libary crate 的入口文件：mod models;
│   ├── main.rs          # 二进制 binary crate 的入口文件
│   ├── models.rs        # (1) 写入子模块，'mod 子模块文件名' (如：mod enums;)
├── Cargo.toml
└── Cargo.lock
```
- models.rs文件
```rust
pub mod enums;
pub mod structs;    //添加 struct 模块
```  
- 在 models 文件夹下创建  structs.rs 文件

📝: **枚举** 提高访问权限只需要在 类名 前加 pub 即可  
📝: **结构体** 必须 类名、属性 都加上 pub 
```rust
//引入 enums 模块中的枚举数据
use ctrate::model::enums::YesNo;

pub struct HousePrice{
    pub price: u32,
    pub area:String,
    pub bed_rooms: u32,
    pub main_road: YesNo
}  
```
- main.rs
```rust
use package_name::models::structs::HousePrice;

fn main(){
    let y = package_name::models::enums::YesNo::Yes;

    //通过 use 引入 HousePrice
    let house_price = HousePrice{
        price: 1000,
        area: String::from("Center"),
        bed_rooms: 3,
        main_road: YesNo::Yes
    };
}
```
### 4、使用 use 引用模块：  
**function**: 引用到父模块  
**struct, enum...**： 引用 完整路径   

```use 引用到项目有同名方法``` 

【1】 方法1：use引用到父级，使用时带上父级名称，如 fmt::Reslt
```rust
main(){
    use std::fmt;
    use std::io;

    fn func1() -> fmt::Restlt<()>{
        printl!("引用 fmt ");
    }

    fn func2() -> io::Restlt<()>{
        println!("引用 io");
    }
}
```
【2】使用 as 关键字为引用起一个别名  
```rust
main(){
    use std::fmt::Result;
    use std::io::Restlt as IoResult;

    fn func1() -> Result {
        println!("引用 fmt::Result ");
    }

    fn func2() -> IoResult{
        println!("引用 io::Result ");
    }
}
```
【3】应用同一个库下的多个模块时，使用{} 
```rust
use csv::Writer;
use csv::ReaderBuilder;

//上边引用可以用{}合并
use csv::{Writer, ReaderBuilder};
```
